<div class="container">
  <div class="headerUserlist">
    <h1>{{data.evetType == 'create' ? 'Add User' : 'Update user'}}</h1>
    <mat-icon (click)="closeDialog()">cancel</mat-icon>
</div>
  <form [formGroup]="addUserForm">
    <app-common-input
      [control]="'name'"
      [type]="'text'"
      [label]="'Name'"
      [class]="'formControl'"
      [error]="getErrorValidator('name', 'Name')"
      [form]="addUserForm"
    ></app-common-input>
    <app-common-input
      [control]="'email'"
      [type]="'email'"
      [label]="'Email'"
      [class]="'formControl'"
      [error]="getErrorValidator('email', 'Email')"
      [form]="addUserForm"
      [readonly]="isReadOnly"
    ></app-common-input>

    <app-common-input
      [control]="'phoneNumber'"
      [type]="'number'"
      [label]="'Phone Number'"
      [class]="'formControl'"
      [error]="getErrorValidator('phoneNumber', 'Phone Number')"
      [form]="addUserForm"
    ></app-common-input>
    <app-common-select
      [label]="'Select Gender'"
      [control]="'gender'"
      [form]="addUserForm"
      [List]="gender"
      [error]="getErrorValidator('gender', 'Gender')"
      (selectedId)="getGender($event)"
    ></app-common-select>
    <app-common-select *ngIf="getLoggedInUserRole != userRoleConfig.MANAGER"
    [placeholder]="'Select role'"
      [label]="'Select role'"
      [control]="'role'"
      [form]="addUserForm"
      [List]="rolesArray"
      [error]="getErrorValidator('role', 'Role')"
      (selectedId)="getRole($event)"
    ></app-common-select>
    <app-common-select *ngIf="selectedRole == userRoleConfig.REGULARUSER && getLoggedInUserRole != userRoleConfig.MANAGER"
      [label]="'Select parent'"
      [control]="'parent'"
      [form]="addUserForm"
      [List]="managersArray"
      [error]="getErrorValidator('parent', 'parent')"
      (selectedId)="getParent($event)"
      [placeholder]="'Select Parent'"
    ></app-common-select>

    <div class="group-gap">
      <div class="avatar-upload">
          <div class="avatar-edit">
              <input type='file' id="imageUpload" max-size="2000" #fileInput (change)="uploadFile($event)" accept=".jpg, .jpeg, .png" />
          </div>
          <button type="submit" class="primaryButton" (click)="fileInput.click()">Upload Image</button>
          <h3 class="m-0"></h3>{{fileName}}
      </div>
      <div class="imagePath" [ngClass]="imageUrl" v-if="imageUrl != undefined">
        <img [src]="imageUrl" alt="" >
    </div>
  </div>
  <div class="sumbitData">
    <button type="submit"  class="primaryButton" (click)="userAction()">Save</button>
  </div>
  </form>
</div>
